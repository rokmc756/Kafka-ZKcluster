#- set_fact:
#    jdk_package_name: jdk-{{ java.version }}-{{ java.platform }}.rpm
#  tags: 
#    - java 
#    - java_installation

- name: Check if java rpm package is installed
  package_facts:
    manager: "auto"

- name: Install Java rpm package
  yum:
    name: "{{ item }}"
    state: absent
  with_items:
    - java-1.8.0-openjdk
    - java-1.8.0-openjdk-devel
    - java-11-openjdk
    - java-11-openjdk-devel

#  when: "'java-1.8.0' is not in ansible_facts.packages"
#  async: 60
#  poll: 5

#- name: Correct java version selected
#  alternatives:
#    link: /usr/bin/java
#    name: java
#    path: /usr/lib/jvm/java-1.8.0/bin/java
#    priority: -10
#    # path: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.352.b08-2.el9_0.x86_64/bin/java
#    # path: /usr/lib/jvm/java-11-openjdk-11.0.ea.28-7.el7.x86_64/bin/java
#    # path: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-7.b13.el7.x86_64/bin/java

#- name: Get Java Version
#  shell: java -version
#  register: javaVersion

#- name: Set Java Version Fact
#  set_fact:
#    java_version: "{{ javaVersion.stdout_lines }}"
#  ignore_erros: yes

#- name: debug
#  debug: var=java_version
#  ignore_erros: yes
